# AGENTS.toon - Agent-optimized repository guidance

purpose{statement}:
+Provide agent-specific instructions for repository development, testing, and deployment workflows.
+Complement README.md with detailed technical guidance that agents need but humans don't.
+

agents[3]{name, role, scope, instructions}:
codex_agent, General Development, Full repository, Use pnpm for package management, run tests before commits, follow Rust clippy guidelines
test_agent, Quality Assurance, Testing only, Focus on test coverage, use pytest for Python, run integration tests in CI/CD
docs_agent, Documentation, Documentation only, Update docs on API changes, maintain contributing guides, ensure README accuracy

environment_setup[4]{tool, command, purpose, notes}:
pnpm, pnpm install, Install dependencies, Use --filter for specific packages
uv, uv venv && uv sync, Python environment setup, Creates .venv with dependencies
just, just fmt, Rust code formatting, Run automatically after code changes
prek, prek install, Pre-commit hooks, Enable automatic checks on commits

testing[5]{type, command, scope, when_to_run, notes}:
unit, cargo test -p <package>, Rust packages, After code changes, Scope to specific package
integration, pytest tests/, Python, Before PRs, Use breeze for full environment
lint, pnpm lint, All code, Before commits, Fix errors before proceeding
format, just fmt, Rust only, After changes, Automatic formatting
docs, uv run --group docs build-docs, Documentation, After API changes, Ensure docs stay current

workflow[4]{stage, action, command, verification}:
development, Write code, Editor, Follow language-specific conventions
testing, Run tests, pnpm test or cargo test, All tests pass
linting, Check style, pnpm lint or clippy, No lint errors
documentation, Update docs, Edit relevant files, Docs build successfully
commit, Create commit, git commit -m "type(scope): description", Follow conventional commits

conventions[6]{area, rule, example, enforcement}:
naming, Crate prefixes, codex- prefix for Rust crates, Manual review
formatting, Inline format args, format!("Hello {}", name) vs format!("Hello {name}"), Clippy lint
testing, Object equality, assert_eq!(expected, actual) vs field comparison, Manual review
commits, Conventional commits, feat(auth): add OAuth2 support, Pre-commit hook
pr_titles, Package prefix, [package-name] Description, PR template
dependencies, Lock files, Commit lockfiles, CI/CD validation

file_patterns[3]{pattern, purpose, agent_handling}:
AGENTS.md, Human-readable agent instructions, Reference for TOON conversion
AGENTS.toon, Agent-optimized format, Primary agent consumption
.github/workflows/, CI/CD configuration, Automated validation
contributing-docs/, Detailed guides, Reference documentation

commands[5]{name, command, context, frequency, automation}:
install, pnpm install, Workspace setup, As needed, Manual
test, pnpm test, Development, Per change, Manual
lint, pnpm lint, Pre-commit, Always, Manual
format, just fmt, Post-change, Always, Automatic
docs, uv run --group docs build-docs, Documentation changes, As needed, Manual

validation[3]{check, command, failure_action}:
syntax, cargo check, Fix errors before proceeding
tests, cargo test --all-features, Run full test suite
docs, build-docs, Update documentation sources

integration_points[2]{system, method}:
github, GitHub Actions, .github/workflows/ files
ci_cd, Multiple platforms, Platform-specific configuration files
